微信小程序现在推广势在必行，毕竟基于微信的庞大用用户，随用随走的使用体验获得广大用户的称赞，但你仔细看看微信在设备上占用的空间就能看见，毕竟小程序的代码还是要有存储的地盘么！

作为一个开发，偶尔协助前端同事调试小程序，我的微信已用空间19.1GB，这仅仅是微信用到的空间，并不包含聊天记录。

从体积上讲小程序可以让你不用安装app就体验app的业务，着实方便，但是不安装app并不代表这些业务这些业务代码包不存储。当然相比安装app，维护那么多账户来说小程序还是有很大优点，且整体包大小肯定要比app小很多。

![](https://gitee.com/stivepeim/img4mk/raw/master/20210302190956.png)

### DEBUG

微信小程序二维码必须是后台或者云开发生成，用来裂变和扩散特别方便，可以扫码进入指定界面，带上特定参数。

我们也是利用scene参数实现特定业务，问题就出在这里。

![](https://gitee.com/stivepeim/img4mk/raw/master/20210302191817.png)

### 限制

1. 此功能小程序必须有线上版本（微信硬性要求）
2. 生成小程序码的scene的数据必须在解析时做对应处理，（业务自己对应）我们的问题也就出在这里。

### 问题重现

1. 我们用uniapp实现多端代码合一，H5，微信公众号和微信小程序，唯独小程序的二维码必须调用小程序api实现
2. 查看后台api调用微信小程序生成小程序码时的参数没问题

### 解决问题 开发工具怎么读取小程序码？

既然生成小程序码的数据已经传递给微信了，那么问题应该就在读取小程序码的过程中丢失的。

突然有点蒙，开发工具应该能模拟读取小程序码的功能，官网找文档，如下图

模拟小程序场景仅上百个场景。

![](https://gitee.com/stivepeim/img4mk/raw/master/20210302193233.png)

每个场景对应的code

![](https://gitee.com/stivepeim/img4mk/raw/master/20210302192951.png)

### 问题解决

看到日志中的code我就放心了

![](https://gitee.com/stivepeim/img4mk/raw/master/20210302193544.png)

![](https://gitee.com/stivepeim/img4mk/raw/master/20210208210917.jpg)

![](https://gitee.com/stivepeim/img4mk/raw/master/20201226230441.gif)